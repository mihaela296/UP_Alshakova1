<Window x:Class="UP_Alshakova.OrdersWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление заказами" 
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource PrimaryBackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Шапка -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Background="{StaticResource SecondaryBackgroundBrush}" 
                    Height="50" VerticalAlignment="Center">
            <TextBlock Text="Управление заказами" Style="{StaticResource HeaderTextBlockStyle}" 
                      VerticalAlignment="Center" Margin="10,0"/>

            <Button x:Name="btnAddOrder" Content="Добавить заказ" Click="btnAddOrder_Click" 
                    Style="{StaticResource AccentButtonStyle}" Margin="20,0,0,0" Visibility="Collapsed"/>

            <!-- ФИО пользователя -->
            <TextBlock x:Name="txtUserInfoHeader" Style="{StaticResource BaseTextBlockStyle}" 
                      VerticalAlignment="Center" Margin="300,0,0,0" FontWeight="Bold"/>

            <Button x:Name="btnBack" Content="Назад к товарам" Click="btnBack_Click" 
                    Style="{StaticResource AccentButtonStyle}" Margin="10,0,0,0"/>
        </StackPanel>

        <!-- Список заказов -->
        <DataGrid Grid.Row="1" x:Name="dgOrders" AutoGenerateColumns="False" Margin="10"
                  IsReadOnly="True" SelectionMode="Single" 
                  MouseDoubleClick="dgOrders_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Артикул" Binding="{Binding OrderCode}" Width="100"/>
                <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="100"/>
                <DataGridTextColumn Header="Адрес пункта выдачи" Binding="{Binding DeliveryAddress}" Width="200"/>
                <DataGridTextColumn Header="Дата заказа" Binding="{Binding OrderDate, StringFormat=dd.MM.yyyy}" Width="100"/>
                <DataGridTextColumn Header="Дата доставки" Binding="{Binding DeliveryDate, StringFormat=dd.MM.yyyy}" Width="100"/>
                <DataGridTemplateColumn Header="Действия" Width="100" x:Name="colActions" Visibility="Collapsed">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <!-- Убрана кнопка редактирования, редактирование только по двойному клику -->
                                <Button Content="🗑️" Click="btnDeleteOrder_Click" 
                                        Style="{StaticResource AccentButtonStyle}" Padding="5,2" Margin="5,0,0,0"
                                        ToolTip="Удалить"
                                        Tag="{Binding OrderID}"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>